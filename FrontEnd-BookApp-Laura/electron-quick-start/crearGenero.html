<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'">-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
    <title>Género</title>
  </head>
  <body>
        <section class="hero is-link is-fullheight">
            <div class="hero-body">
                <div class="container">
                    <div class="columns is-centered">
                    <div class="column is-5-tablet is-4-desktop is-3-widescreen">
                        <form method="post" class="box" onsubmit="handleSubmit(event);">
                            <div class="field">
                                <label for="" class="label">Nombre del género</label>
                                <div class="control has-icons-left">
                                <input name="nombreGenero" type="text" placeholder="" class="input is-link is-rounded" required>
                                <span class="icon is-small is-left">
                                    <i class="fa fa-envelope"></i>
                                </span>
                                </div>
                            </div>
                            <div class="field">
                                <button class="button is-link is-rounded">
                                Registrar género
                                </button>
                            </div>
                            <!-- <div class="field" id="resultado">

                            </div> -->
                        </form>
                    </div>
                </div>
            </div>
        </div>
        </section>
        <script async type="text/Javascript">
            function handleSubmit(event){
                event.preventDefault();
                
                let formData = new FormData(event.target);
                let object = {};
                console.log(formData)

                formData.forEach(function(value,key){
                    object[key] = value;
                });


               let req = new XMLHttpRequest();
                req.open('POST', 'http://localhost:5000/registrarGenero')
                req.setRequestHeader('Content-type', 'application/json')
                req.onload=function(event){
                    let arrayBuffer = req.response;
                    console.log(arrayBuffer)
                    document.querySelector('#resultado').innerHTML=arrayBuffer;
                }

                setTimeout(function(){
                    window.location.assign('menu.html');
                },2000)

                console.log(object);
                req.send(JSON.stringify(object));
            }
        </script>
 </body>
</html>